<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sol del Amor</title>
  <style>
    #modal-bienvenida {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(10, 10, 30, 0.92);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.7s;
    }
    #modal-bienvenida.oculto {
      opacity: 0;
      pointer-events: none;
    }
    #modal-bienvenida .contenido {
      background: rgba(30, 30, 60, 0.98);
      border-radius: 18px;
      box-shadow: 0 0 40px #000a;
      padding: 2.5rem;
      text-align: center;
      color: #fff;
      font-family: 'Great Vibes', cursive, Arial, sans-serif;
      font-size: 2.2rem;
      max-width: 90vw;
    }
    #modal-bienvenida button {
      margin-top: 2.2rem;
      font-size: 1.5rem;
      padding: 0.8rem 2.2rem;
      border-radius: 12px;
      background: #c9204b;
      color: #fff;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 12px rgba(0,0,0,0.12);
    }
    html, body {
      margin: 0;
      height: 100%;
      overflow: hidden;
      background: radial-gradient(ellipse at bottom, #050505, #000);
    }
    canvas {
      display: block;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100dvh;
    }
  </style>
</head>
<body>
  <div id="modal-bienvenida">
    <div class="contenido">
      <div>Toca aqu√≠ amor ‚ù§</div>
      <button id="btn-ingresar">Presiona aqu√≠</button>
    </div>
  </div>
  <canvas id="galaxy-canvas"></canvas>
  <audio id="musica" autoplay loop>
    <source src="musica.mp3" type="audio/mpeg">
  </audio>

  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
      }
    }
  </script>

  <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

    // Modal
    window.addEventListener('DOMContentLoaded', () => {
      const modal = document.getElementById('modal-bienvenida');
      const btn = document.getElementById('btn-ingresar');
      const audio = document.getElementById('musica');
      btn.addEventListener('click', () => {
        modal.classList.add('oculto');
        setTimeout(() => { modal.style.display = 'none'; }, 700);
        audio.pause();
        audio.src = 'https://github.com/Baque2005/Organizador/raw/refs/heads/master/Emmanuel%20Cortes-%20Amor%20(Official%20Video).mp3';
        audio.load();
        audio.play();
      });
    });

    // Escena
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 5000);
    const renderer = new THREE.WebGLRenderer({
      canvas: document.getElementById('galaxy-canvas'),
      antialias: true
    });
    renderer.setSize(window.innerWidth, window.innerHeight);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    // üåû SOL REALISTA (en lugar del agujero negro)
    const sunTexture = new THREE.TextureLoader().load("https://threejs.org/examples/textures/planets/sun.jpg");
    const sunMaterial = new THREE.MeshBasicMaterial({ map: sunTexture });
    const sun = new THREE.Mesh(new THREE.SphereGeometry(80, 64, 64), sunMaterial);
    scene.add(sun);

    // Luz del Sol
    const sunLight = new THREE.PointLight(0xffaa33, 3, 3000);
    scene.add(sunLight);

    // ‚ú® Frases rom√°nticas flotando
    const galaxyGroup = new THREE.Group();
    scene.add(galaxyGroup);

    const frases = [
      "Te amo ‚ù§Ô∏è", "Eres mi sol üåû", "Mi vida üí´", "Mi amor üíñ", "Solo t√∫ üåπ",
      "Mi universo üíã", "Contigo siempre ‚ôæÔ∏è", "Eres mi cielo ‚ú®", "Mi reina üëë", "Por siempre üî•"
    ];

    function crearTexto(texto) {
      const canvas = document.createElement('canvas');
      canvas.width = 1024;
      canvas.height = 250;
      const ctx = canvas.getContext('2d');
      ctx.shadowColor = "rgba(255,150,50,1)";
      ctx.shadowBlur = 50;
      const grad = ctx.createLinearGradient(0, 0, canvas.width, 0);
      grad.addColorStop(0, "#ff6600");
      grad.addColorStop(0.5, "#fff");
      grad.addColorStop(1, "#ff6600");
      ctx.font = "bold 120px Arial";
      ctx.fillStyle = grad;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(texto, canvas.width / 2, canvas.height / 2);
      return new THREE.CanvasTexture(canvas);
    }

    const cantidad = 60;
    const radio = 600;
    for (let i = 0; i < cantidad; i++) {
      const texto = frases[i % frases.length];
      const textura = crearTexto(texto);
      const material = new THREE.SpriteMaterial({ map: textura, transparent: true });
      const sprite = new THREE.Sprite(material);
      const angulo = i * (Math.PI * 2 / cantidad);
      sprite.position.set(Math.cos(angulo) * radio, (Math.random() - 0.5) * 100, Math.sin(angulo) * radio);
      sprite.scale.set(80, 16, 1);
      galaxyGroup.add(sprite);
    }

    // üåå Estrellas
    const estrellasGeo = new THREE.BufferGeometry();
    const estrellasCant = 8000;
    const posiciones = new Float32Array(estrellasCant * 3);
    for (let i = 0; i < estrellasCant; i++) {
      posiciones[i * 3] = (Math.random() - 0.5) * 8000;
      posiciones[i * 3 + 1] = (Math.random() - 0.5) * 8000;
      posiciones[i * 3 + 2] = (Math.random() - 0.5) * 8000;
    }
    estrellasGeo.setAttribute('position', new THREE.BufferAttribute(posiciones, 3));
    const estrellasMat = new THREE.PointsMaterial({ color: 0xffffff, size: 1 });
    const estrellas = new THREE.Points(estrellasGeo, estrellasMat);
    scene.add(estrellas);

    // üîÜ Planetas orbitando alrededor del Sol
    function crearPlaneta(url, tama√±o, distancia, velocidad) {
      const textura = new THREE.TextureLoader().load(url);
      const planeta = new THREE.Mesh(new THREE.SphereGeometry(tama√±o, 64, 64),
        new THREE.MeshStandardMaterial({ map: textura }));
      planeta.userData = { distancia, velocidad, angulo: Math.random() * Math.PI * 2 };
      scene.add(planeta);
      return planeta;
    }

    const planetas = [
      crearPlaneta("https://threejs.org/examples/textures/planets/mercury.jpg", 8, 140, 0.02),
      crearPlaneta("https://threejs.org/examples/textures/planets/venus.jpg", 14, 200, 0.015),
      crearPlaneta("https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg", 16, 270, 0.012),
      crearPlaneta("https://threejs.org/examples/textures/planets/mars_1k_color.jpg", 12, 340, 0.01),
      crearPlaneta("https://threejs.org/examples/textures/planets/jupiter2_1k.jpg", 40, 450, 0.008),
      crearPlaneta("https://threejs.org/examples/textures/planets/saturn.jpg", 35, 560, 0.006),
      crearPlaneta("https://threejs.org/examples/textures/planets/uranus.jpg", 25, 680, 0.004),
      crearPlaneta("https://threejs.org/examples/textures/planets/neptune.jpg", 24, 780, 0.003)
    ];

    scene.add(new THREE.AmbientLight(0xffffff, 0.3));

    // Animaci√≥n
    const reloj = new THREE.Clock();
    function animar() {
      const t = reloj.getElapsedTime();
      galaxyGroup.rotation.y = t * 0.02;
      planetas.forEach(p => {
        p.userData.angulo += p.userData.velocidad;
        p.position.set(
          Math.cos(p.userData.angulo) * p.userData.distancia,
          0,
          Math.sin(p.userData.angulo) * p.userData.distancia
        );
      });
      renderer.render(scene, camera);
      controls.update();
      requestAnimationFrame(animar);
    }

    camera.position.set(0, 200, 900);
    animar();
  </script>
</body>
</html>
