<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carta para ti 💌</title>
  <style>
    :root{
      --pink-1:#ff4d79;
      --pink-2:#ff668c;
      --bg1:#ffe6f0;
      --bg2:#fff3e6;
      --paper:#fffaf6;
    }
    html,body{height:100%;margin:0;padding:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));font-family:"Georgia", serif;overflow:hidden}
    .center{height:100%;display:flex;align-items:center;justify-content:center;padding:20px;box-sizing:border-box}

    /* Huellitas */
    .paw { position:absolute;font-size:18px;color:#5a3a2b; opacity:0; animation: pawIn 0.9s forwards; }
    @keyframes pawIn { 0% { transform:scale(.5); opacity:0 } 60% { transform:scale(1.05); opacity:1 } 100% { transform:scale(1); opacity:1 } }

    /* Elementos flotantes (corazones, flores, estrellas) */
    .float { position: absolute; font-size:22px; opacity:.85; pointer-events:none; animation: floatUp 7s linear infinite; }
    @keyframes floatUp { 0% { transform: translateY(90vh) scale(1); opacity:1 } 100% { transform: translateY(-15vh) scale(1.25); opacity:0 } }

    /* Sobre */
    .envelope { position:relative; width:360px; max-width:92vw; height:250px; border-radius:12px; background:var(--pink-1); box-shadow: 0 12px 30px rgba(0,0,0,.18); overflow:visible; transform-origin:center; }
    .flap {
      position:absolute; left:0; top:0;
      width:0; height:0;
      border-left:180px solid transparent;
      border-right:180px solid transparent;
      border-bottom:130px solid var(--pink-2);
      transform-origin: top;
      animation: flapOpen 1.8s ease forwards;
      z-index:6;
      border-radius:4px;
    }
    @keyframes flapOpen { 0% { transform: rotateX(0) } 60% { transform: rotateX(-95deg) } 100% { transform: rotateX(-120deg) translateY(-6px) } }

    /* Carta (papel) */
    .letter {
      position:absolute; left:14px; right:14px; top:22px; bottom:14px;
      background: var(--paper);
      border-radius:10px;
      padding:20px 18px;
      box-sizing:border-box;
      border: 3px solid var(--pink-1);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.7), 0 10px 26px rgba(0,0,0,0.12);
      opacity:0;
      transform: translateY(8px) scale(.995);
      animation: showLetter 1.2s ease 1.9s forwards;
      z-index:4;
      overflow:hidden;
    }
    @keyframes showLetter { to { opacity:1; transform: translateY(0) scale(1);} }

    /* Texto (tipo máquina de escribir con caret) */
    #typed {
      font-family: "Dancing Script", "Georgia", serif;
      font-size:16px;
      line-height:1.6;
      color:#2b2b2b;
      white-space:pre-wrap;
      text-align:left;
      max-height:100%;
      overflow:auto;
      padding-right:6px;
    }
    .caret {
      display:inline-block;
      width:2px;
      height:1em;
      background:#333;
      vertical-align:bottom;
      margin-left:3px;
      animation: blink 1s step-end infinite;
    }
    @keyframes blink { 50% { opacity:0 } }

    /* Firma */
    .signature {
      margin-top:12px;
      text-align:right;
      font-weight:700;
      color:var(--pink-1);
      font-size:17px;
      opacity:0;
      transform: translateY(6px);
      transition: all 450ms ease;
    }
    .signature.show { opacity:1; transform: translateY(0); }

    /* Responsivo: carta más pequeña en móviles */
    @media (max-width:420px){
      .letter { padding:16px; }
      #typed { font-size:15px; }
      .envelope { height:220px }
    }
  </style>
</head>
<body>
  <div class="center">
    <div class="paw" style="top:8%; left:50%; animation-delay:.1s">🐾</div>
    <div class="paw" style="top:18%; left:45%; animation-delay:.3s">🐾</div>
    <div class="paw" style="top:30%; left:40%; animation-delay:.5s">🐾</div>
    <div class="paw" style="top:44%; left:42%; animation-delay:.7s">🐾</div>
    <div class="paw" style="top:58%; left:48%; animation-delay:.9s">🐾</div>
    <div class="paw" style="top:66%; left:55%; animation-delay:1.1s">🐾</div>
    <div class="paw" style="top:56%; left:62%; animation-delay:1.3s">🐾</div>
    <div class="paw" style="top:40%; left:66%; animation-delay:1.5s">🐾</div>
    <div class="paw" style="top:26%; left:60%; animation-delay:1.7s">🐾</div>

    <div class="envelope" aria-hidden="false">
      <div class="flap"></div>

      <div class="letter" id="letter">
        <div id="typed" aria-live="polite"></div>
        <div id="signature" class="signature"></div>
      </div>
    </div>

    <div class="float" style="left:6%; animation-delay:0s">🌸</div>
    <div class="float" style="left:18%; animation-delay:1.2s">✨</div>
    <div class="float" style="left:30%; animation-delay:.6s">💕</div>
    <div class="float" style="left:46%; animation-delay:2s">🌼</div>
    <div class="float" style="left:62%; animation-delay:3s">🌟</div>
    <div class="float" style="left:78%; animation-delay:4s">💖</div>
  </div>

<script>
  const FULL_TEXT = `Mi cielo 👸💕
Hoy quiero regalarte estas palabras porque mi corazón no se cansa de agradecerte por existir.
Cada amanecer contigo en mis pensamientos es un pequeño milagro: una razón más para sonreír,
una promesa de esperanza y un refugio en los días difíciles. 🌸✨

Cuando pienso en ti veo la ternura en los pequeños gestos, la fuerza en tu mirada,
y la paz que solo tú sabes dar. Eres la melodía que acompaña mis días, la inspiración de mis sueños,
y la calma que quiero encontrar cuando todo se vuelva ruido. 💫🌹

Quiero caminar a tu lado, compartir risas, apoyar tus metas y celebrar cada logro contigo.
Que la vida nos regale momentos sencillos, llenos de cariño, respeto y complicidad.
No importa la distancia ni los retos: lo que siento por ti es constante y verdadero. 💖

Gracias por cada detalle, por cada sonrisa que me regalas y por ser el mejor de mis motivos.
Hoy y siempre te llevo en el lugar más honesto de mi corazón. 💕✨

Con todo mi amor,
Tu persona favorita: Sebastián 🤴🏻`;

  const typedEl = document.getElementById('typed');
  const signatureEl = document.getElementById('signature');

  function typeWriter(text, target, speed = 22, onDone = null) {
    target.innerHTML = '';
    const caret = document.createElement('span');
    caret.className = 'caret';
    target.appendChild(caret);
    let i = 0;
    function step() {
      if (i < text.length) {
        const ch = text.charAt(i);
        if (target.contains(caret)) target.removeChild(caret);
        if (ch === '\n') {
          target.appendChild(document.createElement('br'));
        } else {
          target.appendChild(document.createTextNode(ch));
        }
        target.appendChild(caret);
        i++;
        setTimeout(step, speed);
      } else {
        if (target.contains(caret)) target.removeChild(caret);
        if (typeof onDone === 'function') onDone();
      }
    }
    step();
  }

  // Ahora el código espera 3.5 segundos, lo suficiente para que todas las animaciones
  // de la carta terminen, y luego inicia el efecto de escribir el texto.
  setTimeout(() => {
    typeWriter(FULL_TEXT, typedEl, 20, () => {
      signatureEl.textContent = '— Tu persona favorita: Sebastián ❤️';
      signatureEl.classList.add('show');
    });
  }, 3500); // 3.5 segundos para dar tiempo a todas las animaciones
</script>
</body>
</html>
